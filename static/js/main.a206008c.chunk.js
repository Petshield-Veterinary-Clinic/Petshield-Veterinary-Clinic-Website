(this["webpackJsonppetshield-veterinary-clinic-website"]=this["webpackJsonppetshield-veterinary-clinic-website"]||[]).push([[0],{149:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(241),c=n(0),i=n.n(c),o=n(17),s=n.n(o),l=n(8),d=n(16),u=(n(149),n(12)),m=n(126),j=n(212),b=n(213),p=n(214),O=n(51),h=n(215),f=n(207),x=n(216),g=n(125),v=n(86),S={API_BASE_URL:"https://petshield-veterinary-api-dev.herokuapp.com",WS_BASE_URL:"wss://petshield-veterinary-api-dev.herokuapp.com",WS_TIMEOUT:25e3},I=240,y=Object(g.a)({palette:{primary:{main:"#424242"},secondary:{main:v.a[400]},background:{default:"#121212",paper:"#121212"},text:{primary:v.a[400]}},overrides:{MuiButton:{outlined:{borderColor:v.a[400]},contained:{backgroundColor:v.a[400],color:"#FFFFFF"}},MuiSelect:{icon:{color:v.a[400]}},MuiDialogContentText:{root:{color:v.a[400]}},MuiDialogTitle:{root:{color:v.a[400]}},MuiOutlinedInput:{root:{borderColor:v.a[400],"&.MuiFormLabel":{color:"white"}},notchedOutline:{borderColor:"".concat(v.a[400]," !important")}},MuiFormHelperText:{root:{color:"white"}},MuiFormLabel:{root:{color:"".concat(v.a[400]," !important")}},MuiTableCell:{root:{textAlign:"center",padding:"1em"}}}}),C=n(31),N=Object(C.b)({name:"modals",initialState:{modalType:null,modalProps:{}},reducers:{showModal:function(e,t){e.modalType=t.payload.modalType,e.modalProps=t.payload.modalProps},hideModal:function(e,t){e.modalType="",e.modalProps={}}}}),k=N.reducer,w=N.actions,F=w.showModal,P=w.hideModal,A=n(46),D=n.n(A),L=Object(f.a)((function(e){return{appBar:{width:"calc(100% - ".concat(I,"px)"),marginLeft:I,flexGrow:1},grow:{flexGrow:1}}})),T=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(l.c)((function(e){return e.auth})).user,o=Boolean(n),s=Object(l.b)(),d=L(),f=function(){r(null)},g=function(){f(),s(F({modalType:"LOGOUT_MODAL",modalProps:{title:"Logout",message:"Are you sure you want to logout from the session?"}}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{position:"fixed",className:d.appBar,children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(O.a,{noWrap:!0,children:"Petshield Veterinary Clinic and Grooming Center System"}),Object(a.jsx)("div",{className:d.grow}),Object(a.jsx)(O.a,{children:"".concat(D.a.capitalize(i.branchName),"-Branch")}),Object(a.jsx)(h.a,{edge:"end",onClick:function(e){r(e.target)},children:Object(a.jsx)(x.a,{style:{fontSize:"2rem"},color:"secondary"})})]})}),Object(a.jsx)(m.a,{anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"bottom",horizontal:"left"},open:o,onClose:f,children:Object(a.jsx)(j.a,{onClick:g,children:"Logout"})})]})},R=n(10),E=n(246),M=n(217),_=n(211),z=n(173),W=n(218),B=n(219),H=n(222),q=n(220),V=n(221),G=n(73),U=n.p+"static/media/house.7d774967.svg",Q=n.p+"static/media/agreement_form.ca65a6e9.svg",J=n.p+"static/media/all_clients.2a3b6270.svg",X=n.p+"static/media/all_items.e153111f.svg",Y=n.p+"static/media/appointments.f3506a0a.svg",K=n.p+"static/media/clients.b5a069e7.svg",Z=n.p+"static/media/dashboard.99dfeff1.svg",$=n.p+"static/media/inventory.c084951b.svg",ee=n.p+"static/media/item_transactions.a4256305.svg",te=n.p+"static/media/pet_queue.25ef2fa6.svg",ne=n.p+"static/media/payments.8026a3af.svg",ae=n(94),re=Object(f.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar,drawer:{width:I,flexShrink:0},drawerPaper:{width:I},nested:{paddingLeft:e.spacing(4)},drawerIcon:{width:"40px",height:"40px",fill:"".concat(e.palette.secondary.main," !important")}}})),ce=function(){var e=re(),t=Object(c.useState)({home:!1,clients:!1,inventory:!1}),n=Object(u.a)(t,2),r=n[0],o=n[1],s=[{label:"Home",type:"home",handleOnClick:function(){return o(Object(R.a)(Object(R.a)({},r),{},{home:!r.home}))},icon:U,subItems:[{label:"Dashboard",icon:Z,path:" "},{label:"Pet Queue",icon:te,path:" "}]},{label:"Clients",type:"clients",handleOnClick:function(){return o(Object(R.a)(Object(R.a)({},r),{},{clients:!r.clients}))},icon:K,subItems:[{label:"All Clients",icon:J,path:" "},{label:"Payments",icon:ne,path:" "},{label:"Appointments",icon:Y,path:" "},{label:"Agreement Form",icon:Q,path:" "}]},{label:"Inventory",type:"inventory",handleOnClick:function(){return o(Object(R.a)(Object(R.a)({},r),{},{inventory:!r.inventory}))},icon:$,subItems:[{label:"All Items",icon:X,path:"/content/inventory/items"},{label:"Item Transactions",icon:ee,path:"/content/inventory/sales"}]}];return Object(a.jsxs)(E.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},anchor:"left",children:[Object(a.jsx)("div",{className:e.toolbar}),Object(a.jsx)(M.a,{}),Object(a.jsx)(_.a,{children:s.map((function(t){return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsxs)(z.a,{button:!0,onClick:t.handleOnClick,children:[Object(a.jsx)(W.a,{children:Object(a.jsx)(ae.a,{src:t.icon,beforeInjection:function(t){t.classList.add(e.drawerIcon)}},t.label)}),Object(a.jsx)(B.a,{primary:t.label}),r[t.type]?Object(a.jsx)(q.a,{}):Object(a.jsx)(V.a,{})]},t.label),Object(a.jsx)(H.a,{in:r[t.type],timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(_.a,{component:"div",disablePadding:!0,children:t.subItems.map((function(t){return Object(a.jsxs)(z.a,{button:!0,component:G.a,to:t.path,className:e.nested,children:[Object(a.jsx)(W.a,{children:Object(a.jsx)(ae.a,{src:t.icon,beforeInjection:function(t){t.classList.add(e.drawerIcon)}},t.label)}),Object(a.jsx)(B.a,{primary:t.label})]},t.label)}))})})]},t.label)}))})]})},ie=function(){return Object(a.jsx)("div",{children:"Home Dashboard!"})},oe=n(232),se=n(243),le=n(225),de=n(119),ue=n.n(de),me=n(7),je=n.n(me),be=n(15),pe=n(118),Oe=n.n(pe).a.create({baseURL:S.API_BASE_URL,headers:{"Content-Type":"application/json"}}),he=function(e){e?Oe.defaults.headers.common={Authorization:"Bearer ".concat(e)}:delete Oe.defaults.headers.common.Authorization},fe=Oe,xe=function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/items/search/".concat(n,"/").concat(t));case 2:if(!(a=e.sent).data.data){e.next=7;break}return e.abrupt("return",a.data.data);case 7:throw Error(a.data.error);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.a)(Object(R.a)({},t),{},{price:Number(t.price),incentive:Number(t.incentive)}),e.next=3,fe.post("/items/".concat(n),a);case 3:if(!(r=e.sent).data.data){e.next=8;break}return e.abrupt("return",r.data.data);case 8:throw Error(r.data.error);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.a)(Object(R.a)({},t),{},{price:Number(t.price),incentiveAmount:Number(t.incentiveAmount),incentiveRate:Number(t.incentiveRate),discount:Number(t.discount)}),e.next=3,fe.patch("/items/item/".concat(n,"/").concat(t.ID),a);case 3:if(!(r=e.sent).data.data){e.next=8;break}return e.abrupt("return",r.data.data);case 8:throw Error(r.data.error);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.a)(Object(R.a)({},t),{},{price:Number(t.price),incentive:Number(t.incentive),discount:Number(t.discount)}),e.next=3,fe.patch("/items/item/".concat(n,"/").concat(t.ID),a);case 3:if(!(r=e.sent).data.data){e.next=8;break}return e.abrupt("return",r.data.data);case 8:throw Error(r.data.error);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(be.a)(je.a.mark((function e(t,n,a){var r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.post("/item-sales/".concat(t,"/").concat(n,"/").concat(a));case 2:if(!(r=e.sent).data.data){e.next=7;break}return e.abrupt("return",r.data.data);case 7:throw Error(r.data.error);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ye=Object(C.b)({name:"inventorySearchResultSlice",initialState:{isLoading:!1,result:[],error:null},reducers:{searchItemsStart:function(e){e.isLoading=!0},searchItemsSuccess:function(e,t){e.isLoading=!1,e.result=t.payload,e.error=null},searchItemsFailure:function(e,t){e.isLoading=!1,e.error=t.payload},clearItemsSearch:function(e,t){e.result=[],e.isLoading=!1,e.error=null}}}),Ce=ye.reducer,Ne=ye.actions,ke=Ne.searchItemsFailure,we=Ne.searchItemsStart,Fe=Ne.searchItemsSuccess,Pe=Ne.clearItemsSearch,Ae=function(e){return function(){var t=Object(be.a)(je.a.mark((function t(n,a){var r,c;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.user,t.prev=1,n(we()),t.next=5,xe(e,r.branchName);case 5:c=t.sent,n(Fe(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(ke(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},De=function(e,t){e.isLoading=!1,e.error=t.payload},Le=Object(C.b)({name:"inventoryItems",initialState:{items:[],itemSales:[],isLoading:!1,error:null},reducers:{fetchItemsStart:function(e){e.isLoading=!0},fetchItemsSuccess:function(e,t){e.isLoading=!1,e.items=t.payload,e.error=null},fetchItemsFailure:De,addItemStart:function(e,t){},addItemSuccess:function(e,t){},addItemFailure:De,modifyItemStart:function(){},modifyItemSuccess:function(e,t){e.items=e.items.map((function(e,n){return n===t.payload.itemIndex?t.payload.newItem:e}))},modifyItemFailure:De,discountItemStart:function(){},discountItemSuccess:function(e,t){e.items=e.items.map((function(e,n){return n===t.payload.itemIndex?t.payload.newItem:e}))},discountItemFailure:De}}),Te=Le.actions,Re=Te.fetchItemsStart,Ee=Te.fetchItemsSuccess,Me=Te.fetchItemsFailure,_e=Te.addItemStart,ze=Te.addItemSuccess,We=Te.addItemFailure,Be=Te.modifyItemStart,He=Te.modifyItemSuccess,qe=Te.modifyItemFailure,Ve=Te.discountItemStart,Ge=Te.discountItemFailure,Ue=Te.discountItemSuccess,Qe=Le.reducer,Je=Object(f.a)((function(e){return{root:{paddingBottom:"1em"}}})),Xe=function(){var e=Je(),t=Object(l.b)(),n=D.a.debounce((function(e){t(""===e?Pe():Ae(e))}),800);return Object(a.jsx)(se.a,{className:e.root,fullWidth:!0,size:"small",variant:"outlined",label:"Search Item",InputProps:{endAdornment:Object(a.jsx)(le.a,{children:Object(a.jsx)(ue.a,{})})},onChange:function(e){n(e.target.value)}})},Ye=n(50),Ke=n(95),Ze=n(227),$e=n(228),et=n(229),tt=n(230),nt=n(231),at=n(226),rt=n(120),ct=n.n(rt),it=n(83),ot=n.n(it),st=n(84),lt=n.n(st),dt=Object(f.a)((function(){return{root:{display:"flex",width:"100%",paddingTop:"1em",alignItems:"center",justifyContent:"space-between"}}})),ut=function(e){var t=e.gotoPage,n=e.nextPage,r=e.previousPage,c=e.canNextPage,i=e.canPreviousPage,o=e.pageCount,s=e.pageSize,d=e.pageIndex,u=e.itemsCount,m=dt();Object(l.b)();return Object(a.jsxs)("div",{className:m.root,children:[function(){var e=s*(d+1)>=u?u:s*(d+1);return Object(a.jsx)(O.a,{children:"Showing ".concat(e," out of ").concat(u," items")})}(),Object(a.jsxs)("div",{children:[Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return t(0)},disabled:!i,children:"FIRST"}),Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return r()},disabled:!i,children:"PREV"}),Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return n()},disabled:!c,children:"NEXT"}),Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return t(o-1)},disabled:!c,children:"LAST"})]})]})},mt=n(244),jt=n(81),bt=n.n(jt),pt=Object(f.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"}}})),Ot=function(e){var t=e.setPageSize,n=e.pageSize,r=pt(),c=Object(l.b)();return Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)("div",{children:Object(a.jsxs)(O.a,{children:["Show \xa0",Object(a.jsx)(mt.a,{value:n,onChange:function(e){t(e.target.value)},children:[10,20,30,40,50].map((function(e){return Object(a.jsx)(j.a,{value:e,children:e},e)}))}),"\xa0 entries"]})}),Object(a.jsx)("div",{children:Object(a.jsx)(at.a,{variant:"outlined",startIcon:Object(a.jsx)(bt.a,{}),onClick:function(e){c(F({modalType:"ADD_ITEM_MODAL",modalProps:{}}))},children:"Add Item"})})]})},ht=n(85),ft=Object(f.a)((function(e){return{root:{width:"100%",height:"100%",border:"1px solid ".concat(e.palette.secondary.main),borderRadius:"20px",padding:"1.5em",overflowX:"auto"},showItemCountButtons:{display:"flex",justifyContent:"space-between",alignItems:"center"},showItemCountField:{width:"50px"},tableHeader:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},pagination:{display:"flex",width:"100%",paddingTop:"1em",justifyContent:"space-between",alignItems:"center"},inStock:{color:e.palette.secondary.main,border:"2px solid red",borderColor:e.palette.secondary.main,borderRadius:"10px",padding:"1em",textAlign:"center",fontWeight:"bold"},itemDiscounted:{color:ht.a[400],border:"2px solid red",borderColor:ht.a[400],borderRadius:"10px",padding:"1em",textAlign:"center",fontWeight:"bold"},outOfStock:{color:"red",border:"2px solid red",borderRadius:"10px",padding:"1em",textAlign:"center",fontWeight:"bold"}}})),xt=function(e){var t=e.data,n=e.columns,r=e.items,c=ft(),i=Object(l.b)(),o=Object(Ye.useTable)({data:t,columns:n,initialState:{pageIndex:0,pageSize:10}},Ye.useSortBy,Ye.usePagination),s=o.getTableProps,d=o.headerGroups,u=o.prepareRow,m=o.page,j=o.canPreviousPage,b=o.canNextPage,p=o.pageCount,h=o.gotoPage,f=o.nextPage,x=o.previousPage,g=o.setPageSize,v=o.state,S=v.pageIndex,I=v.pageSize,y=function(e){if("col6"===e.column.id||"col8"===e.column.id)return Object(a.jsxs)(O.a,{children:["\u20b1",e.render("Cell")]});if("col7"===e.column.id){var t=e.row.values.col7/100*e.row.values.col6;return Object(a.jsxs)(O.a,{children:[e.render("Cell"),"%"," (".concat(t.toFixed(2),")")]})}return Object(a.jsx)(O.a,{children:e.render("Cell")})};return Object(a.jsxs)(Ke.a,{className:c.root,children:[Object(a.jsx)(Ot,{pageSize:I,setPageSize:g}),Object(a.jsxs)(Ze.a,Object(R.a)(Object(R.a)({},s()),{},{children:[Object(a.jsx)($e.a,{children:d.map((function(e){return Object(a.jsxs)(et.a,{children:[e.headers.map((function(e){return Object(a.jsx)(tt.a,Object(R.a)(Object(R.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(a.jsxs)("div",{className:c.tableHeader,children:[e.render("Header"),e.isSorted?e.isSortedDesc?Object(a.jsx)(ot.a,{fontSize:"small"}):Object(a.jsx)(lt.a,{fontSize:"small"}):null]},e.id)}),e.id)})),Object(a.jsx)(tt.a,{})]},e.id)}))}),Object(a.jsx)(nt.a,{children:m.map((function(e,t){return u(e),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(et.a,Object(R.a)(Object(R.a)({},e.getRowProps()),{},{children:[e.cells.map((function(e,t){return Object(a.jsx)(tt.a,{children:Object(a.jsx)("div",Object(R.a)(Object(R.a)({},e.getCellProps([{className:e.column.className},(n=e,"Out of Stock"===n.value?{className:c.outOfStock}:"In Stock"===n.value?{className:c.inStock}:"Discounted"===n.value?{className:c.itemDiscounted}:{className:""})])),{},{children:y(e)}))},"col".concat(t));var n})),Object(a.jsx)(tt.a,{children:Object(a.jsx)(at.a,{fullWidth:!0,endIcon:Object(a.jsx)(ct.a,{}),variant:"contained",onClick:function(){var t;t=e.index,i(F({modalType:"MANAGE_ITEM_MODAL",modalProps:{item:r[t],itemIndex:t}}))},children:"Manage Item"})},e.id)]}),e.id)})}))})]})),Object(a.jsx)(ut,{canPreviousPage:j,canNextPage:b,previousPage:x,nextPage:f,gotoPage:h,pageCount:p,pageSize:I,pageIndex:S,itemsCount:t.length})]})},gt=function(e){var t=e.items,n=(Object(l.b)(),{data:Object(c.useMemo)((function(){return t.map((function(e){var t="",n=e.discount>0?e.price*(e.discount/100):0;return t=e.discount>0&&e.inStock>0?"Discounted":0===e.discount&&e.inStock>0?"In Stock":"Out of Stock",{col1:e.ID,col2:e.name,col3:e.salesCategory,col4:e.inStock,col5:t,col6:Number(e.price).toFixed(2),col7:e.discount,col8:(e.price-n).toFixed(2)}}))}),[t]),columns:Object(c.useMemo)((function(){return[{Header:"ID",accessor:"col1"},{Header:"Name",accessor:"col2"},{Header:"Category",accessor:"col3"},{Header:"Stock",accessor:"col4"},{Header:"Status",accessor:"col5"},{Header:"Original Price",accessor:"col6"},{Header:"Discount",accessor:"col7"},{Header:"Total Price",accessor:"col8"}]}),[]),items:t});return Object(a.jsx)(xt,Object(R.a)({},n))},vt=Object(f.a)((function(e){return{root:{padding:e.spacing(3),height:"100%",width:"100%",display:"flex",flexDirection:"column",paddingTop:"83px"},loadingIndicator:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}})),St=function(){var e=vt(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.inventoryItems})),r=n.isLoading,i=n.items,o=n.error,s=Object(l.c)((function(e){return e.inventorySearch})),d=s.isLoading,u=s.result;s.error;Object(c.useEffect)((function(){t(Pe()),t(function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n().auth.user,r=localStorage.getItem("token");try{t(Re()),new WebSocket("".concat(S.WS_BASE_URL,"/items/").concat(a.branchName,"?jwt=").concat(r)).onmessage=function(e){var n=JSON.parse(e.data);t(Ee(n.data))}}catch(o){t(Me(o.message))}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[t]);return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(Xe,{}),r||d?Object(a.jsx)("div",{className:e.loadingIndicator,children:Object(a.jsx)(oe.a,{color:"secondary"})}):o?Object(a.jsx)("div",{children:"An Error has occured!"}):Object(a.jsx)(gt,{items:u.length>0?u:i})]})},It=n(22),yt=function(e,t){e.isLoading=!1,e.error=t.payload},Ct=Object(C.b)({name:"inventorySales",initialState:{isLoading:!1,itemSales:[],dailySales:0,error:null},reducers:{fetchItemSalesStart:function(e){e.isLoading=!0},fetchItemSalesSuccess:function(e,t){e.isLoading=!1,e.itemSales=t.payload.itemSales,e.dailySales=t.payload.dailySales,e.error=null},fetchItemSalesError:yt,addItemSaleStart:function(){},addItemSaleSuccess:function(e,t){e.isLoading=!1,e.itemSales=[].concat(Object(It.a)(e.itemSales),[t.payload]),e.error=null},addItemSaleFailure:yt}}),Nt=Ct.reducer,kt=Ct.actions,wt=kt.fetchItemSalesError,Ft=kt.fetchItemSalesStart,Pt=kt.fetchItemSalesSuccess,At=kt.addItemSaleFailure,Dt=kt.addItemSaleStart,Lt=kt.addItemSaleSuccess,Tt=Object(f.a)((function(){return{root:{display:"flex",width:"100%",paddingTop:"1em",alignItems:"center",justifyContent:"space-between"}}})),Rt=function(e){var t=e.gotoPage,n=e.nextPage,r=e.previousPage,c=e.canNextPage,i=e.canPreviousPage,o=e.pageCount,s=e.pageSize,l=e.pageIndex,d=e.itemsCount,u=Tt();return Object(a.jsxs)("div",{className:u.root,children:[function(){var e=s*(l+1)>=d?d:s*(l+1);return Object(a.jsx)(O.a,{children:"Showing ".concat(e," out of ").concat(d," items")})}(),Object(a.jsxs)("div",{children:[Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return t(0)},disabled:!i,children:"FIRST"}),Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return r()},disabled:!i,children:"PREV"}),Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return n()},disabled:!c,children:"NEXT"}),Object(a.jsx)(at.a,{variant:"outlined",onClick:function(){return t(o-1)},disabled:!c,children:"LAST"})]})]})},Et=Object(f.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"}}})),Mt=function(e){var t=e.setPageSize,n=e.pageSize,r=Et(),c=Object(l.b)();return Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)("div",{children:Object(a.jsxs)(O.a,{children:["Show \xa0",Object(a.jsx)(mt.a,{value:n,onChange:function(e){t(e.target.value)},children:[10,20,30,40,50].map((function(e){return Object(a.jsx)(j.a,{value:e,children:e},e)}))}),"\xa0 entries"]})}),Object(a.jsx)("div",{children:Object(a.jsx)(at.a,{variant:"outlined",startIcon:Object(a.jsx)(bt.a,{}),onClick:function(e){c(F({modalType:"ADD_SALE_MODAL",modalProps:{}}))},children:"Add Transaction"})})]})},_t=Object(f.a)((function(e){return{root:{width:"100%",height:"100%",border:"1px solid ".concat(e.palette.secondary.main),borderRadius:"20px",padding:"1.5em",overflowX:"auto"},showItemCountButtons:{display:"flex",justifyContent:"space-between",alignItems:"center"},showItemCountField:{width:"50px"},tableHeader:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},pagination:{display:"flex",width:"100%",paddingTop:"1em",justifyContent:"space-between",alignItems:"center"},inStock:{color:e.palette.secondary.main,border:"2px solid red",borderColor:e.palette.secondary.main,borderRadius:"10px",padding:"1em",textAlign:"center",fontWeight:"bold"},itemDiscounted:{color:ht.a[400],border:"2px solid red",borderColor:ht.a[400],borderRadius:"10px",padding:"1em",textAlign:"center",fontWeight:"bold"},outOfStock:{color:"red",border:"2px solid red",borderRadius:"10px",padding:"1em",textAlign:"center",fontWeight:"bold"}}})),zt=function(e){var t=e.data,n=e.columns,r=_t(),c=Object(Ye.useTable)({data:t,columns:n,initialState:{pageIndex:0,pageSize:10}},Ye.useSortBy,Ye.usePagination),i=c.getTableProps,o=c.headerGroups,s=c.prepareRow,l=c.page,d=c.canPreviousPage,u=c.canNextPage,m=c.pageCount,j=c.gotoPage,b=c.nextPage,p=c.previousPage,h=c.setPageSize,f=c.state,x=f.pageIndex,g=f.pageSize,v=function(e){return Object(a.jsx)(O.a,{children:e.render("Cell")})};return Object(a.jsxs)(Ke.a,{className:r.root,children:[Object(a.jsx)(Mt,{pageSize:g,setPageSize:h}),Object(a.jsxs)(Ze.a,Object(R.a)(Object(R.a)({},i()),{},{children:[Object(a.jsx)($e.a,{children:o.map((function(e){return Object(a.jsx)(et.a,{children:e.headers.map((function(e){return Object(a.jsx)(tt.a,Object(R.a)(Object(R.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(a.jsxs)("div",{className:r.tableHeader,children:[e.render("Header"),e.isSorted?e.isSortedDesc?Object(a.jsx)(ot.a,{fontSize:"small"}):Object(a.jsx)(lt.a,{fontSize:"small"}):null]})}))}))})}))}),Object(a.jsx)(nt.a,{children:l.map((function(e,t){return s(e),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(et.a,Object(R.a)(Object(R.a)({},e.getRowProps()),{},{children:e.cells.map((function(e,t){return Object(a.jsx)(tt.a,{children:Object(a.jsx)("div",Object(R.a)(Object(R.a)({},e.getCellProps()),{},{children:v(e)}))},"col".concat(t))}))}),e.id)})}))})]})),Object(a.jsx)(Rt,{canPreviousPage:d,canNextPage:u,previousPage:p,nextPage:b,gotoPage:j,pageCount:m,pageSize:g,pageIndex:x,itemsCount:t.length})]})},Wt=n(121),Bt=n.n(Wt),Ht=function(e){var t=e.itemSales,n=(Object(l.b)(),Object(c.useMemo)((function(){return t.map((function(e){return{col1:e.item.name,col2:e.quantity,col3:"\u20b1".concat(Number(e.sales).toFixed(2)),col4:"".concat(Number(e.incentives).toFixed(2),"%"),col5:"\u20b1".concat(Number(e.netSales).toFixed(2)),col6:Bt()(e.CreatedAt).format("L")}}))}),[t])),r=Object(c.useMemo)((function(){return[{Header:"Name",accessor:"col1"},{Header:"Quantity",accessor:"col2"},{Header:"Sales",accessor:"col3"},{Header:"Incentives",accessor:"col4"},{Header:"Net Sales",accessor:"col5"},{Header:"Transaction Date",accessor:"col6"}]}),[]);return Object(a.jsx)(zt,{data:n,columns:r})},qt=n(233),Vt=Object(f.a)((function(e){return{root:{display:"grid",width:"100%",gridTemplate:"1fr / 1fr 1fr 1fr",gridGap:"1em",paddingBottom:"1em"},dailySalesCard:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"1px solid green",padding:"1em",borderRadius:"10px"}}})),Gt=function(){var e=Vt(),t=Object(l.c)((function(e){return e.inventorySales})).dailySales,n=Object(c.useState)(0),r=Object(u.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(0),d=Object(u.a)(s,2),m=d[0],j=d[1];return Object(c.useEffect)((function(){var e=0,n=0;Object.keys(t).forEach((function(a){"Blood Test"!==a?(e+=t[a].sales,n+=t[a].incentives):j(t[a].sales-t[a].incentives)})),o(e-n)}),[t,o,j]),Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsxs)(qt.a,{className:e.dailySalesCard,children:[Object(a.jsx)(O.a,{style:{fontWeight:"bold"},children:"Daily Sales"}),Object(a.jsx)(O.a,{children:"P".concat(Number(i).toFixed(2))})]}),Object(a.jsxs)(qt.a,{className:e.dailySalesCard,children:[Object(a.jsx)(O.a,{style:{fontWeight:"bold"},children:"Daily Sales - Blood Test"}),Object(a.jsx)(O.a,{children:"P".concat(Number(m).toFixed(2))})]}),Object(a.jsxs)(qt.a,{className:e.dailySalesCard,children:[Object(a.jsx)(O.a,{style:{fontWeight:"bold"},children:"Net Daily Sales"}),Object(a.jsx)(O.a,{children:"P".concat(Number(m+i).toFixed(2))})]})]})},Ut=Object(f.a)((function(e){return{root:{padding:e.spacing(3),height:"100%",width:"100%",display:"flex",flexDirection:"column",paddingTop:"83px"},loadingIndicator:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}})),Qt=function(){var e=Ut(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.inventorySales})),r=n.isLoading,i=n.itemSales,o=n.error;Object(c.useEffect)((function(){t(function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a,r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n().auth.user,r=localStorage.getItem("token");try{t(Ft()),new WebSocket("".concat(S.WS_BASE_URL,"/item-sales/").concat(a.branchName,"?jwt=").concat(r)).onmessage=function(e){var n=JSON.parse(e.data);t(Pt(n.data))}}catch(o){t(wt(o))}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[t]);return Object(a.jsx)("div",{className:e.root,children:r?Object(a.jsx)("div",{className:e.loadingIndicator,children:Object(a.jsx)(oe.a,{color:"secondary"})}):o?Object(a.jsx)("div",{children:"An Error has occured!"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Gt,{}),Object(a.jsx)(Ht,{itemSales:i})]})})},Jt=n(234),Xt=n(235),Yt=n(236),Kt=n(237),Zt=(Object(f.a)((function(e){return{}})),Object(f.a)((function(e){return{loadingIndicator:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center,"}}}))),$t=(Object(f.a)((function(e){return{}})),function(){var e=Object(be.a)(je.a.mark((function e(t){var n;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.post("/auth/login",t);case 2:if(!(n=e.sent).data.data){e.next=7;break}return e.abrupt("return",n.data.data);case 7:throw Error(n.data.error.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),en=function(){var e=Object(be.a)(je.a.mark((function e(){var t;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/users/token");case 2:if(!(t=e.sent).data.data){e.next=7;break}return e.abrupt("return",t.data.data);case 7:throw Error(t.data.error.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tn=Object(C.b)({name:"auth",initialState:{user:{},token:null,isLoading:!1,error:null},reducers:{loginStart:function(e,t){e.isLoading=!0},loginSuccess:function(e,t){e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.authToken,he(t.payload.authToken),localStorage.setItem("token",t.payload.authToken)},loginFailure:function(e,t){e.isLoading=!1,e.error=t.payload},logoutStart:function(e,t){e.isLoading=!0},logoutSuccess:function(e,t){e.user={},e.token=null,e.isLoading=!1},logoutFailure:function(e,t){e.isLoading=!1,e.error=t.payload},checkAuthStart:function(e,t){e.isLoading=!0},checkAuthSuccess:function(e,t){e.user=t.payload,e.isLoading=!1},checkAuthFailure:function(e,t){e.isLoading=!1,e.error=t.payload}}}),nn=tn.actions,an=nn.checkAuthStart,rn=nn.checkAuthSuccess,cn=nn.checkAuthFailure,on=nn.loginStart,sn=nn.loginSuccess,ln=nn.loginFailure,dn=nn.logoutFailure,un=nn.logoutStart,mn=nn.logoutSuccess,jn=tn.reducer,bn=n(238),pn=function(e){var t=e.isVisible,n=e.title,r=e.message,i=e.handleNegativePressed,o=e.handlePositivePressed,s=Object(c.useState)(t),d=Object(u.a)(s,2),m=d[0],j=d[1],b=Object(l.b)();return Object(a.jsxs)(Jt.a,{open:m,onClose:function(){j(!t)},onExited:function(){b(P())},children:[Object(a.jsx)(Xt.a,{children:n}),Object(a.jsx)(Yt.a,{children:Object(a.jsx)(Kt.a,{children:r})}),Object(a.jsxs)(bn.a,{children:[Object(a.jsx)(at.a,{variant:"text",onClick:i,children:"Cancel"}),Object(a.jsx)(at.a,{variant:"text",onClick:o,children:"Confirm"})]})]})},On=n(29),hn=Object(On.a)(),fn=function(e){var t=e.isVisible,n=e.title,r=e.message,c=Object(l.b)();return Object(a.jsx)(pn,{isVisible:t,title:n,message:r,handleNegativePressed:function(){c(P())},handlePositivePressed:function(){c(function(){var e=Object(be.a)(je.a.mark((function e(t){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear();try{t(un()),t(mn())}catch(n){t(dn(n))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),hn.replace("/auth/login"),c(P())}})},xn=n(239),gn=n(245),vn=n(35),Sn=Object(f.a)((function(e){return{addItemForm:{display:"flex",width:"100%",height:"100%",flexDirection:"column"},addItemFormField:{margin:"0.5em",flexGrow:"1"},incentiveFieldsWrapper:{display:"flex"}}})),In=function(e){var t=e.onSubmit,n=e.classes,r=e.isIncentiveFixed,c=e.setIncentiveFixed,i=Object(vn.b)({defaultValues:{remarks:"",salesCategory:"",incentiveRate:0,incentiveAmount:0}}),o=i.register,s=i.handleSubmit,l=i.errors;return Object(a.jsxs)("form",{noValidate:!0,className:n.addItemForm,id:"addItemForm",onSubmit:s(t),children:[Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Name",name:"name",size:"small",inputRef:o({required:!0}),error:!!l.name}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Stock",name:"inStock",size:"small",inputRef:o({required:!0,min:0}),error:!!l.inStock}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Price",name:"price",size:"small",InputProps:{startAdornment:Object(a.jsx)(O.a,{children:"\u20b1"})},inputRef:o({required:!0,min:0}),error:!!l.price}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Sales Category",name:"salesCategory",size:"small",inputRef:o}),Object(a.jsxs)("div",{children:[Object(a.jsx)(xn.a,{className:n.addItemFormField,control:Object(a.jsx)(gn.a,{checked:r,onChange:function(){c(!r)}}),label:"Fixed Incentive Rate"}),Object(a.jsxs)("div",{className:n.incentiveFieldsWrapper,children:[Object(a.jsx)(se.a,{disabled:r,className:n.addItemFormField,variant:"outlined",label:"Incentive Rate",name:"incentiveRate",size:"small",InputProps:{endAdornment:Object(a.jsx)(O.a,{children:"%"})},inputRef:o({required:!0,max:100,min:0}),error:!!l.incentiveRate}),Object(a.jsx)(se.a,{disabled:!r,className:n.addItemFormField,variant:"outlined",label:"Incentive Amount",name:"incentiveAmount",size:"small",inputRef:o({required:!0,min:0}),error:!!l.incentiveAmount})]})]}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Remarks",name:"remarks",size:"small",inputRef:o})]})},yn=Object(f.a)((function(e){return{content:{display:"flex",width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1em"}}})),Cn=Object(f.a)((function(e){return{addItemForm:{display:"flex",width:"100%",height:"100%",flexDirection:"column"},addItemFormField:{margin:"0.5em",flexGrow:"1"},incentiveFieldsWrapper:{display:"flex"}}})),Nn=function(e){var t=e.onSubmit,n=e.classes,r=e.itemDetails,c=e.isIncentiveFixed,i=e.setIncentiveFixed,o=Object(vn.b)({defaultValues:{remarks:null!==r.remarks?r.remarks:"",salesCategory:null!==r.salesCategory?r.salesCategory:"",price:null!==r.price?r.price:0,name:null!==r.name?r.name:"",incentiveRate:null!==r.incentiveRate?r.incentiveRate:0,incentiveAmount:null!==r.incentiveAmount?r.incentiveAmount:0,inStock:null!==r.inStock?r.inStock:0}}),s=o.register,l=o.handleSubmit,d=o.errors;return Object(a.jsxs)("form",{noValidate:!0,className:n.addItemForm,id:"modifyItemForm",onSubmit:l(t),children:[Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Name",name:"name",size:"small",inputRef:s({required:!0}),error:!!d.name}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Stock",name:"inStock",size:"small",inputRef:s({required:!0,min:0}),error:!!d.inStock}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Price",name:"price",size:"small",InputProps:{startAdornment:Object(a.jsx)(O.a,{children:"\u20b1"})},inputRef:s({required:!0,min:0}),error:!!d.price}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Item Sales Category",name:"salesCategory",size:"small",inputRef:s}),Object(a.jsx)(xn.a,{className:n.addItemFormField,control:Object(a.jsx)(gn.a,{checked:c,onChange:function(){i(!c)}}),label:"Fixed Incentive Rate"}),Object(a.jsxs)("div",{className:n.incentiveFieldsWrapper,children:[Object(a.jsx)(se.a,{disabled:c,className:n.addItemFormField,variant:"outlined",label:"Incentive Rate",name:"incentiveRate",size:"small",InputProps:{endAdornment:Object(a.jsx)(O.a,{children:"%"})},inputRef:s({required:!0,max:100,min:0}),error:!!d.incentiveRate}),Object(a.jsx)(se.a,{disabled:!c,className:n.addItemFormField,variant:"outlined",label:"Incentive Amount",name:"incentiveAmount",size:"small",inputRef:s({required:!0,min:0}),error:!!d.incentiveAmount})]}),Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Remarks",name:"remarks",size:"small",inputRef:s})]})},kn=Object(f.a)((function(e){return{addItemForm:{display:"flex",width:"100%",height:"100%",flexDirection:"column"},addItemFormField:{margin:"0.5em"}}})),wn=function(e){var t=e.onSubmit,n=e.classes,r=e.itemDetails,c=Object(vn.b)({defaultValues:{discount:null!==r.discount?r.discount:0}}),i=c.register,o=c.handleSubmit,s=c.errors;return Object(a.jsx)("form",{noValidate:!0,className:n.addItemForm,id:"discountItemForm",onSubmit:o(t),children:Object(a.jsx)(se.a,{className:n.addItemFormField,variant:"outlined",label:"Discount Amount",name:"discount",size:"small",type:"number",helperText:s.discount?"Please input a value between 0.01 and 100":"",InputProps:{endAdornment:Object(a.jsx)(O.a,{children:Object(a.jsx)("strong",{children:"%"})})},inputRef:i({required:!0,min:0,max:100}),autoFocus:!0,error:!!s.discount})})},Fn=n(127),Pn=n(242),An=Object(f.a)((function(e){return{form:{display:"grid",width:"100%",gridTemplate:"1fr / 1fr 0.05fr",gridGap:"1em"},itemDetailsWrapper:{display:"grid",width:"100%",gridTemplateColumns:"1fr 1fr 1fr",placeContent:"center",gridGap:"1em",padding:"1em 5em"},itemDetail:{border:"2px solid green",borderRadius:"5px",borderColor:e.palette.secondary.main,padding:"1em"},itemLabel:{textAlign:"center",borderBottom:"2px solid green",borderColor:e.palette.secondary.main,borderRadius:"5px",margin:"0 2em",padding:"0 1em",fontSize:"1rem",fontWeight:"bold",textTransform:"UPPERCASE"},itemContent:{textAlign:"center",padding:"0.5em"},itemReduce:{color:"red",fontSize:"1rem",fontWeight:"bold"},discounted:{color:"".concat(ht.a[400]," !important")},addTransactionFormField:{margin:"0.5em"}}})),Dn=function(e){var t=e.onSubmit,n=e.classes,r=e.dispatch,c=e.items,i=e.isLoading,o=(e.error,e.itemQuantity),s=e.selectedItem,l=e.setItemQuantity,d=e.setSelectedItem,m=Object(vn.b)({defaultValues:{selectedItem:{description:"",discount:0,inStock:"",incentive:0,name:"",price:0,remarks:"",salesCategory:""},quantity:1}}),j=m.register,b=m.handleSubmit,p=m.errors,h=m.control,f=Object(A.debounce)((function(e){r(""===e?Pe():Ae(e))}),800),x=function(e){f(e.target.value)};return Object(a.jsxs)("form",{className:n.form,id:"form",onSubmit:b(t),children:[Object(a.jsx)(vn.a,{render:function(e){var t=e.onChange,n=Object(Fn.a)(e,["onChange"]);return Object(a.jsx)(Pn.a,Object(R.a)({loading:i,options:c.filter((function(e){return e.inStock>0})),getOptionLabel:function(e){return e.name},getOptionSelected:function(e){return e.name},renderOption:function(e){return Object(a.jsx)(O.a,{children:String(e.name)})},renderInput:function(e){return Object(a.jsx)(se.a,Object(R.a)(Object(R.a)({},e),{},{fullWidth:!0,size:"small",label:"Item Name",variant:"outlined",onChange:x,error:!!p.selectedItem,helperText:p.selectedItem?"Enter Item Name":"",InputProps:Object(R.a)(Object(R.a)({},e.InputProps),{},{endAdornment:Object(a.jsxs)(a.Fragment,{children:[i?Object(a.jsx)(oe.a,{color:"secondary"}):null,e.InputProps.endAdornment]})})}))},onChange:function(e,n,a){"select-option"===a&&(d(n),t(n))}},n))},defaultValue:{description:"",discount:0,inStock:"",incentive:0,name:"",price:0,remarks:"",salesCategory:""},onChange:function(e){var t=Object(u.a)(e,2)[1];return console.log(t),t},name:"selectedItem",control:h,rules:{required:!0}}),0===Object.keys(s).length?null:Object(a.jsx)(se.a,{disabled:"Store Sales"!==s.salesCategory,hidden:0===Object.keys(s).length,variant:"outlined",label:"Quantity",inputRef:j({required:!0,min:1,validate:function(e){return e<=Number(s.inStock)&&e>0}}),error:!!p.quantity,helperText:p.quantity?"Invalid Input":"",name:"quantity",fullWidth:!0,size:"small",value:o,onChange:function(e){l(e.target.value)}})]})},Ln={ADD_ITEM_MODAL:function(e){var t=e.isVisible,n=Object(c.useState)(t),r=Object(u.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(!1),d=Object(u.a)(s,2),m=d[0],j=d[1],b=Sn(),p=Object(l.b)(),O=function(){o(!t)};return Object(a.jsxs)(Jt.a,{open:i,onClose:O,onExited:function(){p(P())},children:[Object(a.jsx)(Xt.a,{children:"Add Item"}),Object(a.jsx)(Yt.a,{children:Object(a.jsx)(In,{onSubmit:function(e){var n,a=Object(R.a)({},e);a.isIncentiveFixed=m,m?a.incentiveRate=0:a.incentiveAmount=0,p((n=a,function(){var e=Object(be.a)(je.a.mark((function e(t,a){var r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().auth.user,e.prev=1,t(_e()),t(F({modalType:"LOADING_MODAL",modalProps:{}})),e.next=6,ge(n,r.branchName);case 6:t(F({modalType:"SUCCESS_MODAL",modalProps:{message:"Item Successfully Added!",duration:3e3}})),t(ze()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(F({modalType:"ERROR_MODAL",modalProps:{message:e.t0.message,duration:3e3}})),t(We(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}())),o(!t)},classes:b,isIncentiveFixed:m,setIncentiveFixed:j})}),Object(a.jsxs)(bn.a,{children:[Object(a.jsx)(at.a,{onClick:O,children:"Cancel"}),Object(a.jsx)(at.a,{form:"addItemForm",type:"submit",children:"Add Item"})]})]})},ADD_SALE_MODAL:function(e){var t=e.isVisible,n=Object(c.useState)(t),r=Object(u.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)({}),d=Object(u.a)(s,2),m=d[0],j=d[1],b=Object(c.useState)(1),p=Object(u.a)(b,2),h=p[0],f=p[1],x=Object(l.c)((function(e){return e.inventorySearch})),g=x.result,v=x.isLoading,S=x.error,I=An(m),y=Object(l.b)(),C=function(){o(!t)};return Object(a.jsxs)(Jt.a,{open:i,onClose:C,onExited:function(){y(P())},fullScreen:!0,children:[Object(a.jsx)(Xt.a,{children:"Add Transaction"}),Object(a.jsxs)(Yt.a,{children:[Object(a.jsx)(Dn,{onSubmit:function(e){var n=e.selectedItem;e.quantity;""!==n.name&&(y(function(e,t){return function(){var n=Object(be.a)(je.a.mark((function n(a,r){var c,i;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r().auth.user,a(Dt()),n.next=5,Ie(c.branchName,e,t);case 5:i=n.sent,a(Lt(i)),a(F({modalType:"SUCCESS_MODAL",modalProps:{message:"Transaction Complete!",duration:3e3}})),a(Pe()),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),a(At(n.t0)),a(F({modalType:"ERROR_MODAL",modalProps:{message:n.t0.message,duration:3e3}}));case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()}(n.ID,h)),o(!t))},classes:I,dispatch:y,items:g,selectedItem:m,setSelectedItem:j,setItemQuantity:f,itemQuantity:h,isLoading:v,error:S}),function(){var e=m.price*(m.discount/100),t=m.price*(m.incentiveRate/100),n=m.price*h-e-t;return 0===Object.keys(m).length||0===h?null:Object(a.jsxs)("div",{className:I.itemDetailsWrapper,children:[Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Item Name"}),Object(a.jsx)(O.a,{variant:"h6",className:I.itemContent,children:m.name})]}),Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Item Stock"}),Object(a.jsxs)(O.a,{className:I.itemContent,children:["".concat(m.inStock),Object(a.jsx)("span",{className:I.itemReduce,children:"Store Sales"!==m.salesCategory?"":" -".concat(h)})]})]}),Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Item Status"}),Object(a.jsx)(O.a,{className:I.itemContent,children:m.discount>0?Object(a.jsx)("div",{className:I.discounted,children:"Discounted"}):Object(a.jsx)("div",{children:"In Stock"})})]}),Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Item Discount"}),Object(a.jsx)(O.a,{className:I.itemContent,children:"".concat(m.discount,"% (").concat(Number(e).toFixed(2),")")})]}),Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Item Incentive"}),Object(a.jsx)(O.a,{className:I.itemContent,children:"".concat(m.incentiveRate,"% (").concat(Number(t).toFixed(2),")")})]}),Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Item Price"}),Object(a.jsx)(O.a,{className:I.itemContent,children:"P".concat(Number(m.price).toFixed(2))})]}),Object(a.jsx)("div",{}),Object(a.jsxs)("div",{className:I.itemDetail,children:[Object(a.jsx)(O.a,{variant:"h6",className:I.itemLabel,children:"Total Item Price"}),Object(a.jsx)(O.a,{className:I.itemContent,children:"P".concat(Number(n).toFixed(2))})]}),Object(a.jsx)("div",{})]})}()]}),Object(a.jsxs)(bn.a,{children:[Object(a.jsx)(at.a,{onClick:C,children:"Cancel"}),Object(a.jsx)(at.a,{form:"form",type:"submit",children:"Add Transaction"})]})]})},MANAGE_ITEM_MODAL:function(e){var t=e.isVisible,n=e.item,r=e.itemIndex,i=Object(c.useState)(t),o=Object(u.a)(i,2),s=o[0],d=o[1],m=yn(),j=Object(l.b)();return Object(a.jsxs)(Jt.a,{open:s,onClose:function(){d(!t)},onExited:function(){j(P())},fullWidth:!0,children:[Object(a.jsx)(Xt.a,{children:"Manage Item"}),Object(a.jsxs)(Yt.a,{className:m.content,children:[Object(a.jsx)(at.a,{fullWidth:!0,variant:"contained",onClick:function(){d(!t),j(F({modalType:"MODIFY_ITEM_MODAL",modalProps:{item:n,itemIndex:r}}))},children:"Modify Item"}),Object(a.jsx)("br",{}),Object(a.jsx)(at.a,{fullWidth:!0,variant:"outlined",onClick:function(){d(!t),j(F({modalType:"DISCOUNT_ITEM_MODAL",modalProps:{item:n,itemIndex:r}}))},children:"Discount Item"})]})]})},MODIFY_ITEM_MODAL:function(e){var t=e.isVisible,n=e.item,r=e.itemIndex,i=Object(c.useState)(t),o=Object(u.a)(i,2),s=o[0],d=o[1],m=Object(c.useState)(n.isIncentiveFixed),j=Object(u.a)(m,2),b=j[0],p=j[1],O=Cn(),h=Object(l.b)(),f=function(){d(!t)};return Object(a.jsxs)(Jt.a,{open:s,onClose:f,onExited:function(){h(P())},fullWidth:!0,children:[Object(a.jsx)(Xt.a,{children:"Modify Item"}),Object(a.jsx)(Yt.a,{children:Object(a.jsx)(Nn,{onSubmit:function(e){var a=Object(R.a)(Object(R.a)({},n),e);a.isIncentiveFixed=b,b?a.incentiveRate=0:a.incentiveAmount=0,h(function(e,t){return function(){var n=Object(be.a)(je.a.mark((function n(a,r){var c,i;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().auth.user,n.prev=1,a(Be()),a(F({modalType:"LOADING_MODAL",modalProps:{}})),n.next=6,ve(e,c.branchName);case 6:i=n.sent,a(F({modalType:"SUCCESS_MODAL",modalProps:{message:"Item Successfully Modified!",duration:3e3}})),a(Pe()),a(He({newItem:i,itemIndex:t})),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),a(F({modalType:"ERROR_MODAL",modalProps:{message:n.t0.message,duration:3e3}})),a(qe());case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}()}(a,r)),d(!t)},classes:O,itemDetails:n,isIncentiveFixed:b,setIncentiveFixed:p})}),Object(a.jsxs)(bn.a,{children:[Object(a.jsx)(at.a,{onClick:f,children:"Cancel"}),Object(a.jsx)(at.a,{form:"modifyItemForm",type:"submit",children:"Modify Item"})]})]})},DISCOUNT_ITEM_MODAL:function(e){var t=e.isVisible,n=e.item,r=e.itemIndex,i=Object(c.useState)(t),o=Object(u.a)(i,2),s=o[0],d=o[1],m=kn(),j=Object(l.b)(),b=function(){d(!t)};return Object(a.jsxs)(Jt.a,{open:s,onClose:b,onExited:function(){j(P())},children:[Object(a.jsx)(Xt.a,{children:"Discount Item"}),Object(a.jsx)(Yt.a,{children:Object(a.jsx)(wn,{onSubmit:function(e){var a=e.discount;d(!t),j(function(e,t){return function(){var n=Object(be.a)(je.a.mark((function n(a,r){var c,i;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().auth.user,n.prev=1,a(Ve()),a(F({modalType:"LOADING_MODAL",modalProps:{}})),n.next=6,Se(e,c.branchName);case 6:i=n.sent,a(F({modalType:"SUCCESS_MODAL",modalProps:{message:"Item Discounted!",duration:3e3}})),a(Ue({newItem:i,itemIndex:t})),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a(F({modalType:"ERROR_MODAL",modalProps:{message:n.t0.message,duration:3e3}})),a(Ge());case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e,t){return n.apply(this,arguments)}}()}(Object(R.a)(Object(R.a)({},n),{},{discount:a}),r))},classes:m,itemDetails:n})}),Object(a.jsxs)(bn.a,{children:[Object(a.jsx)(at.a,{onClick:b,children:"Cancel"}),Object(a.jsx)(at.a,{form:"discountItemForm",type:"submit",children:"Discount Item"})]})]})},LOADING_MODAL:function(e){var t=e.isVisible,n=Object(c.useState)(t),r=Object(u.a)(n,2),i=r[0],o=r[1],s=Zt(),d=Object(l.b)();return Object(a.jsxs)(Jt.a,{open:i,onClose:function(){o(!t)},onExited:function(){d(P())},children:[Object(a.jsx)(Xt.a,{children:"Loading..."}),Object(a.jsx)(Yt.a,{className:s.loadingIndicator,children:Object(a.jsx)(oe.a,{color:"secondary"})})]})},ERROR_MODAL:function(e){var t=e.isVisible,n=e.message,r=e.duration,i=Object(c.useState)(t),o=Object(u.a)(i,2),s=o[0],d=o[1],m=Object(l.b)();return Object(a.jsxs)(Jt.a,{open:s,onClose:function(){d(!t)},onExited:function(){m(P())},onEnter:function(){setTimeout((function(){d(!t)}),r||2e3)},children:[Object(a.jsx)(Xt.a,{children:"Error!"}),Object(a.jsx)(Yt.a,{children:Object(a.jsx)(Kt.a,{children:n})})]})},SUCCESS_MODAL:function(e){var t=e.isVisible,n=e.message,r=e.duration,i=Object(c.useState)(t),o=Object(u.a)(i,2),s=o[0],d=o[1],m=Object(l.b)();return Object(a.jsxs)(Jt.a,{open:s,onClose:function(){d(!t)},onExited:function(){m(P())},disableBackdropClick:!0,onEnter:function(){setTimeout((function(){d(!t)}),r||2e3)},children:[Object(a.jsx)(Xt.a,{children:"Success!"}),Object(a.jsx)(Yt.a,{children:Object(a.jsx)(Kt.a,{children:n})})]})},LOGOUT_MODAL:fn},Tn=function(){var e=Object(l.c)((function(e){return e.modals})),t=e.modalProps,n=e.modalType;if(!n)return null;var r=Ln[n];return Object(a.jsx)(r,Object(R.a)({isVisible:""!==n},t))},Rn=function(e){var t=Object(l.c)((function(e){return e.auth})),n=(t.isLoading,t.user);t.error;return 0!==Object.keys(n).length&&n.constructor===Object?Object(a.jsx)(d.b,{path:e.path,exact:e.exact,component:e.component}):Object(a.jsx)(d.a,{to:"/auth/login"})},En=n(123),Mn=n.n(En),_n=n(124),zn=n.n(_n),Wn=Object(f.a)((function(e){return{root:{display:"flex",padding:"1em",margin:"2em",flexDirection:"column",justifyContent:"space-evenly"},textField:{paddingBottom:"1em"}}})),Bn=function(e){var t=e.onSubmit,n=Wn(),r=Object(c.useState)(!1),i=Object(u.a)(r,2),o=i[0],s=i[1],l=Object(vn.b)(),d=l.register,m=l.errors,j=l.handleSubmit;return Object(a.jsxs)("form",{id:"loginForm",className:n.root,onSubmit:j(t),children:[Object(a.jsx)(se.a,{className:n.textField,variant:"outlined",label:"Username",name:"username",size:"small",helperText:m.username?"This field is required!":"",inputRef:d({required:!0}),error:!!m.username}),Object(a.jsx)(se.a,{className:n.textField,variant:"outlined",label:"Password",name:"password",size:"small",helperText:m.password?"This field is required!":"",type:o?"text":"password",inputRef:d({required:!0}),InputProps:{endAdornment:Object(a.jsx)(le.a,{children:Object(a.jsx)(h.a,{onClick:function(){s(!o)},children:o?Object(a.jsx)(Mn.a,{color:"secondary"}):Object(a.jsx)(zn.a,{color:"secondary"})})})},error:!!m.password})]})},Hn=Object(f.a)((function(e){return{root:{height:"100vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.palette.background.default,boxSizing:"border-box"},container:{display:"flex",width:"100%",maxWidth:"600px",flexDirection:"column",border:"1px solid red",borderColor:e.palette.secondary.main,padding:"1em"}}})),qn=function(){var e=Hn(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.auth})),r=n.user,c=n.isLoading,i=(n.error,function(e){var n;t((n=e,function(){var e=Object(be.a)(je.a.mark((function e(t){var a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(on()),t(F({modalType:"LOADING_MODAL",modalProps:{}})),e.next=5,$t(n);case 5:a=e.sent,t(sn(a)),t(P()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t(ln(e.t0.message)),t(F({modalType:"ERROR_MODAL",modalProps:{message:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))});return Object(a.jsx)("div",{className:e.root,children:c?Object(a.jsx)(oe.a,{}):0===Object.keys(r).length?Object(a.jsxs)(Ke.a,{className:e.container,children:[Object(a.jsx)(O.a,{align:"center",variant:"h4",children:"Petshield Veterinary Clinic"}),Object(a.jsx)(Bn,{onSubmit:i}),Object(a.jsx)(at.a,{form:"loginForm",type:"submit",variant:"contained",children:"Login"})]}):Object(a.jsx)(d.a,{to:"/content/home/dashboard"})})},Vn=n(240),Gn=Object(f.a)((function(e){return{root:{display:"flex",height:"100%",padding:0,margin:0},toolbar:e.mixins.toolbar,toastContainer:{zIndex:"1000000"}}})),Un=function(){var e=Gn(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.auth})),r=(n.user,n.isLoading);n.error;Object(c.useEffect)((function(){localStorage.getItem("token")&&t(function(){var e=Object(be.a)(je.a.mark((function e(t){var n,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),he(n),e.prev=2,t(an()),e.next=6,en(n);case 6:a=e.sent,t(rn(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t(cn(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}())}),[t]);return r?Object(a.jsx)(oe.a,{}):Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(d.c,{history:hn,children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/auth/login",component:qn}),Object(a.jsxs)(d.b,{path:"/content",children:[Object(a.jsx)(Vn.a,{}),Object(a.jsx)(ce,{}),Object(a.jsx)(T,{}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(Rn,{path:"/content/home/dashboard",component:ie}),Object(a.jsx)(Rn,{path:"/content/inventory/sales",component:Qt}),Object(a.jsx)(Rn,{path:"/content/inventory/items",component:St}),Object(a.jsx)(d.a,{from:"/",to:"/content/home/dashboard"})]})]}),Object(a.jsx)(d.a,{from:"/",to:"/content/home/dashboard"})]})}),Object(a.jsx)(Tn,{})]})},Qn=n(37),Jn=Object(Qn.c)({inventoryItems:Qe,inventorySales:Nt,inventorySearch:Ce,modals:k,auth:jn});var Xn=Object(C.a)({reducer:Jn});s.a.render(Object(a.jsx)(r.a,{theme:y,children:Object(a.jsx)(l.a,{store:Xn,children:Object(a.jsx)(Un,{})})}),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.a206008c.chunk.js.map